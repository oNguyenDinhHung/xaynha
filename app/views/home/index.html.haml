.row
  .col-lg-5.offset-lg-1
    %h1 Dư nợ vật liệu
    %table#dnvl.table-striped.table-bordered{ width: '100%' }
      %thead
        %tr
          %th Nhà cung cấp
          %th Tình trạng

      %tbody
        - tong_thua = tong_no = 0
        - NhaCungCap.all.each do |ncc|
          - du = ncc.hoa_dons.order(:thoi_gian).last.try(:so_du) || 0
          %tr
            %td= ncc.ten
            - if du > 0
              - tong_thua += du
              %td{style: 'color: blue'}= "Thừa #{du}"
            - elsif du < 0
              - tong_no += -du
              %td{style: 'color: red'}= "Nợ #{-du}"
            - else
              %td{style: 'color: green'}= 'Thanh toán xong'
      %tfooter
        %tr
          %td
          %td{style: 'color: blue; border: solid'}= "Tổng Thừa #{tong_thua}"
        %tr
          %td
          %td{style: 'color: red; border: solid'}= "Tổng Nợ #{tong_no}"
  .col-lg-5
    %h1 Vật liệu tiêu thụ
    %table#vltt.table-striped.table-bordered{ width: '100%' }
      %thead
        %tr
          %th Vật liệu
          %th Số lượng
          %th Tổng tiền
      %tbody
        - tong_tien_vl = 0
        - @vls.each do |k, v|
          - tong_tien_vl += (v[:tt] || 0)
          %tr
            %td= k
            %td= "#{v[:sl]} #{v[:dv]}"
            %td= v[:tt]
      %tfooter
        %tr
          %td
          %td
          %td{style: 'color: blue; border: solid'}= "Tổng #{tong_tien_vl}"
